---
phase: 10-infrastructure-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/desktop/package.json
autonomous: true
requirements:
  - INFRA-GATE-4

must_haves:
  truths:
    - "All 4 npm packages (cmdk, sonner, zundo, papaparse) install without conflicts and can be imported in TypeScript"
    - "@types/papaparse is available as a devDependency"
    - "No existing dependencies are broken by the install"
  artifacts:
    - path: "apps/desktop/package.json"
      provides: "cmdk@1.1.1, sonner@2.0.7, zundo@2.3.0, papaparse@5.5.3 as dependencies; @types/papaparse as devDependency"
      contains: "cmdk"
  key_links:
    - from: "apps/desktop/package.json"
      to: "node_modules/sonner"
      via: "pnpm install"
      pattern: "\"sonner\""
    - from: "apps/desktop/package.json"
      to: "node_modules/zundo"
      via: "pnpm install"
      pattern: "\"zundo\""
---

<objective>
Install all 4 npm packages required by Phases 11–13 into apps/desktop so they are importable for store scaffolding and future feature work.

Purpose: Store scaffolds (Plan 04) import sonner and zundo. Phase 11 uses cmdk and papaparse. All packages must be installed before any code imports them.
Output: apps/desktop/package.json updated; all 4 packages in node_modules.
</objective>

<execution_context>
@/Users/chanmoore/.claude/get-shit-done/workflows/execute-plan.md
@/Users/chanmoore/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install 4 npm packages in apps/desktop</name>
  <files>apps/desktop/package.json</files>
  <action>
Run from the monorepo root — pnpm workspace routes the install to apps/desktop automatically:

```bash
cd /Users/chanmoore/dev/dynasty-os
pnpm --filter @dynasty-os/desktop add cmdk@1.1.1 sonner@2.0.7 zundo@2.3.0 papaparse@5.5.3
pnpm --filter @dynasty-os/desktop add -D @types/papaparse
```

Use exact pinned versions from STATE.md decisions:
- `cmdk@1.1.1` — command palette (QOL-04, Phase 11)
- `sonner@2.0.7` — toast notifications (QOL-01, Phase 11)
- `zundo@2.3.0` — Zustand undo middleware (installed now, wired in Phase 11; Zustand v5 compatible)
- `papaparse@5.5.3` — CSV serialization (QOL-05, Phase 11)
- `@types/papaparse` — TypeScript types for papaparse (devDependency)

IMPORTANT: Install in `apps/desktop`, NOT the workspace root. These are frontend runtime deps, not shared packages.

Do NOT install in packages/ — these are not needed by core-types, db, sport-configs, or ui-components.
  </action>
  <verify>
    <automated>cd /Users/chanmoore/dev/dynasty-os && node -e "require('./apps/desktop/node_modules/sonner')" 2>&1 | head -3; grep -E '"cmdk"|"sonner"|"zundo"|"papaparse"' apps/desktop/package.json</automated>
    <manual>Confirm apps/desktop/package.json has all 4 packages in dependencies and @types/papaparse in devDependencies at the pinned versions</manual>
  </verify>
  <done>All 4 packages appear in apps/desktop/package.json at pinned versions; `pnpm --filter @dynasty-os/desktop build` still passes with no new TypeScript errors introduced by the installs</done>
</task>

<task type="auto">
  <name>Task 2: Verify TypeScript can import the new packages</name>
  <files>apps/desktop/package.json</files>
  <action>
Verify the TypeScript compiler can resolve all 4 packages without errors by running the desktop build:

```bash
cd /Users/chanmoore/dev/dynasty-os
pnpm --filter @dynasty-os/desktop build
```

If build fails due to type errors from new packages (unlikely at install-only stage since no source imports them yet), check that tsconfig.json in apps/desktop includes `"moduleResolution": "bundler"` or `"node16"` — the existing config should already handle this since it was working pre-install.

Do NOT add any import statements to source files in this task — package verification only. Source imports happen in Plans 03 and 04.
  </action>
  <verify>
    <automated>cd /Users/chanmoore/dev/dynasty-os && pnpm --filter @dynasty-os/desktop build 2>&1 | tail -10</automated>
  </verify>
  <done>Desktop app TypeScript build passes with all 4 new packages installed; no conflicts with existing deps</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `grep -E '"cmdk"|"sonner"|"zundo"|"papaparse"' apps/desktop/package.json` returns all 4 at pinned versions
2. `grep "@types/papaparse" apps/desktop/package.json` returns the devDependency
3. `pnpm --filter @dynasty-os/desktop build` exits 0
</verification>

<success_criteria>
- All 4 packages installed at exact pinned versions in apps/desktop (not workspace root)
- @types/papaparse installed as devDependency
- Desktop build still passes with no regressions
- INFRA-GATE-4: All 4 npm packages install and import cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/10-infrastructure-foundation/10-02-SUMMARY.md` following the summary template.
</output>
