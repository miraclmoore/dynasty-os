---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - pnpm-workspace.yaml
  - turbo.json
  - tsconfig.base.json
  - .gitignore
  - .npmrc
  - packages/core-types/package.json
  - packages/core-types/tsconfig.json
  - packages/core-types/src/index.ts
  - packages/db/package.json
  - packages/db/tsconfig.json
  - packages/db/src/index.ts
  - packages/sport-configs/package.json
  - packages/sport-configs/tsconfig.json
  - packages/sport-configs/src/index.ts
  - packages/ui-components/package.json
  - packages/ui-components/tsconfig.json
  - packages/ui-components/src/index.ts
  - apps/desktop/package.json
  - apps/desktop/tsconfig.json
  - apps/desktop/vite.config.ts
  - apps/desktop/index.html
  - apps/desktop/src/main.tsx
  - apps/desktop/src/App.tsx
  - apps/desktop/tailwind.config.ts
  - apps/desktop/postcss.config.js
autonomous: true

must_haves:
  truths:
    - "pnpm install succeeds from project root with all workspaces resolving"
    - "pnpm build succeeds across all packages without errors"
    - "pnpm dev starts the Vite dev server and renders a React component"
    - "Each shared package exports a placeholder that other packages can import"
  artifacts:
    - path: "package.json"
      provides: "Root workspace config"
      contains: "pnpm-workspace"
    - path: "pnpm-workspace.yaml"
      provides: "Workspace package paths"
      contains: "packages/*"
    - path: "turbo.json"
      provides: "Turborepo pipeline config"
      contains: "build"
    - path: "packages/core-types/src/index.ts"
      provides: "Shared TypeScript type definitions placeholder"
    - path: "packages/db/src/index.ts"
      provides: "Database package placeholder"
    - path: "packages/sport-configs/src/index.ts"
      provides: "Sport config package placeholder"
    - path: "apps/desktop/src/App.tsx"
      provides: "React root component"
  key_links:
    - from: "apps/desktop/package.json"
      to: "packages/core-types"
      via: "workspace dependency"
      pattern: "\"@dynasty-os/core-types\": \"workspace:\\*\""
    - from: "turbo.json"
      to: "all packages"
      via: "build pipeline"
      pattern: "\"build\""
---

<objective>
Initialize the Dynasty OS monorepo with Turborepo + pnpm workspaces, scaffold all shared packages
(core-types, db, sport-configs, ui-components), create the desktop app workspace with React + Vite +
Tailwind, and verify the full build pipeline works end to end.

Purpose: Every subsequent plan depends on this monorepo structure existing. Without it, nothing can
be built, tested, or run.

Output: A working monorepo where `pnpm install`, `pnpm build`, and `pnpm dev` all succeed.
</objective>

<execution_context>
@/Users/chanmoore/.claude/get-shit-done/workflows/execute-plan.md
@/Users/chanmoore/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

This is a GREENFIELD project. No existing source code. Initialize everything from scratch.

Package scope: @dynasty-os
Monorepo tool: Turborepo (latest)
Package manager: pnpm (latest)
Node target: 18+ (LTS)

Workspace structure:
  apps/
    desktop/        - Tauri + React + Vite app (the main app)
  packages/
    core-types/     - Shared TypeScript types and interfaces
    db/             - Dexie ORM database layer
    sport-configs/  - Sport configuration objects (CFB, Madden)
    ui-components/  - Shared React components (Tailwind-styled)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize monorepo and scaffold all workspaces</name>
  <files>
    package.json
    pnpm-workspace.yaml
    turbo.json
    tsconfig.base.json
    .gitignore
    .npmrc
    packages/core-types/package.json
    packages/core-types/tsconfig.json
    packages/core-types/src/index.ts
    packages/db/package.json
    packages/db/tsconfig.json
    packages/db/src/index.ts
    packages/sport-configs/package.json
    packages/sport-configs/tsconfig.json
    packages/sport-configs/src/index.ts
    packages/ui-components/package.json
    packages/ui-components/tsconfig.json
    packages/ui-components/src/index.ts
    packages/ui-components/src/components/.gitkeep
  </files>
  <action>
    1. Initialize git repo if not already done. Create root package.json with:
       - name: "dynasty-os"
       - private: true
       - packageManager: pnpm (latest stable, e.g. "pnpm@9.x.x")
       - scripts: { "build": "turbo build", "dev": "turbo dev", "lint": "turbo lint", "clean": "turbo clean" }

    2. Create pnpm-workspace.yaml:
       ```yaml
       packages:
         - "apps/*"
         - "packages/*"
       ```

    3. Create .npmrc with:
       ```
       auto-install-peers=true
       strict-peer-dependencies=false
       ```

    4. Install Turborepo as root dev dependency: pnpm add -D turbo

    5. Create turbo.json:
       ```json
       {
         "$schema": "https://turbo.build/schema.json",
         "tasks": {
           "build": {
             "dependsOn": ["^build"],
             "outputs": ["dist/**"]
           },
           "dev": {
             "cache": false,
             "persistent": true
           },
           "lint": {},
           "clean": {
             "cache": false
           }
         }
       }
       ```

    6. Create tsconfig.base.json at root with:
       - target: ES2022
       - module: ESNext
       - moduleResolution: bundler
       - strict: true
       - esModuleInterop: true
       - skipLibCheck: true
       - forceConsistentCasingInFileNames: true
       - resolveJsonModule: true
       - declaration: true
       - declarationMap: true
       - sourceMap: true
       - jsx: react-jsx

    7. Create .gitignore with node_modules, dist, .turbo, target (for Rust), *.tsbuildinfo, .DS_Store, .env

    8. Scaffold each shared package (core-types, db, sport-configs, ui-components):
       - package.json with name "@dynasty-os/{pkg}", version "0.0.0", main "dist/index.js", types "dist/index.d.ts", scripts: { build: "tsc", clean: "rm -rf dist" }
       - tsconfig.json extending "../../tsconfig.base.json" with outDir "dist", rootDir "src", composite: true
       - src/index.ts with a placeholder export (e.g., `export const PKG_NAME = "@dynasty-os/{pkg}";`)

    For ui-components specifically:
       - Add React and React DOM as peer dependencies
       - Add Tailwind CSS as a dev dependency
       - Export placeholder: `export { default as Placeholder } from './components/Placeholder';`
       - Create src/components/Placeholder.tsx: a simple div component

    For db package:
       - Add dexie as a dependency: pnpm add dexie --filter @dynasty-os/db
       - Placeholder export: `export const DB_VERSION = 1;`

    For core-types:
       - No runtime dependencies, types only
       - Placeholder: `export interface Dynasty { id: string; name: string; }`
  </action>
  <verify>
    Run `pnpm install` from root -- must succeed with no errors.
    Run `pnpm build` from root -- all 4 packages must compile successfully.
    Verify each package has dist/ output with .js and .d.ts files.
  </verify>
  <done>All 4 shared packages exist with valid package.json, tsconfig.json, and src/index.ts. pnpm install and pnpm build both succeed from root.</done>
</task>

<task type="auto">
  <name>Task 2: Create desktop app workspace with React + Vite + Tailwind</name>
  <files>
    apps/desktop/package.json
    apps/desktop/tsconfig.json
    apps/desktop/tsconfig.node.json
    apps/desktop/vite.config.ts
    apps/desktop/index.html
    apps/desktop/src/main.tsx
    apps/desktop/src/App.tsx
    apps/desktop/src/App.css
    apps/desktop/src/index.css
    apps/desktop/tailwind.config.ts
    apps/desktop/postcss.config.js
  </files>
  <action>
    1. Create apps/desktop/ as a Vite + React + TypeScript app. Use pnpm create vite or manually scaffold:
       - package.json with name "@dynasty-os/desktop", private: true
       - Dependencies: react, react-dom, zustand
       - Dev dependencies: @types/react, @types/react-dom, typescript, vite, @vitejs/plugin-react, tailwindcss, postcss, autoprefixer
       - Workspace dependencies: "@dynasty-os/core-types": "workspace:*", "@dynasty-os/db": "workspace:*", "@dynasty-os/sport-configs": "workspace:*", "@dynasty-os/ui-components": "workspace:*"
       - Scripts: { "dev": "vite", "build": "tsc && vite build", "preview": "vite preview" }

    2. Create vite.config.ts:
       ```ts
       import { defineConfig } from 'vite';
       import react from '@vitejs/plugin-react';

       export default defineConfig({
         plugins: [react()],
         clearScreen: false,
         server: {
           port: 1420,
           strictPort: true,
         },
       });
       ```
       Port 1420 is the Tauri convention -- use it now so Plan 01-02 just wires Tauri to it.

    3. Create tailwind.config.ts:
       ```ts
       import type { Config } from 'tailwindcss';

       export default {
         content: [
           './index.html',
           './src/**/*.{js,ts,jsx,tsx}',
           '../../packages/ui-components/src/**/*.{js,ts,jsx,tsx}',
         ],
         theme: { extend: {} },
         plugins: [],
       } satisfies Config;
       ```
       Note: content includes ui-components so shared components get Tailwind classes.

    4. Create postcss.config.js with tailwindcss and autoprefixer plugins.

    5. Create index.css with @tailwind base/components/utilities directives.

    6. Create index.html with div#root mount point.

    7. Create src/main.tsx that renders App into #root.

    8. Create src/App.tsx:
       - Import something from @dynasty-os/core-types to prove workspace linking works
       - Render a simple page: "Dynasty OS" heading with Tailwind classes (e.g., text-3xl font-bold text-center mt-10)
       - Display the imported value to prove cross-package imports work

    9. Create tsconfig.json extending ../../tsconfig.base.json with:
       - No outDir (Vite handles bundling)
       - include: ["src"]
       - references to the 4 shared packages (for IDE support)

    10. Run `pnpm install` from root to resolve new workspace deps.
    11. Run `pnpm build` from root to verify everything compiles.
    12. Run `pnpm dev --filter @dynasty-os/desktop` briefly to confirm Vite starts on port 1420.
  </action>
  <verify>
    `pnpm build` succeeds from root (all packages + desktop app).
    `pnpm dev --filter @dynasty-os/desktop` starts Vite on port 1420.
    Opening http://localhost:1420 shows "Dynasty OS" heading with Tailwind styling.
    Cross-package import from @dynasty-os/core-types works without errors.
  </verify>
  <done>Desktop app workspace exists at apps/desktop/ with React + Vite + Tailwind. pnpm build and pnpm dev both work. Cross-package imports resolve correctly. Vite serves on port 1420.</done>
</task>

</tasks>

<verification>
1. `pnpm install` -- zero errors, all workspaces resolve
2. `pnpm build` -- all packages and desktop app compile
3. `pnpm dev --filter @dynasty-os/desktop` -- Vite starts, React renders, Tailwind works
4. Cross-package import in App.tsx proves workspace linking works
5. Project structure matches: apps/desktop, packages/{core-types,db,sport-configs,ui-components}
</verification>

<success_criteria>
- Monorepo structure exists with Turborepo + pnpm workspaces
- 4 shared packages scaffold with build output
- Desktop app renders React with Tailwind on port 1420
- All workspace cross-references resolve
- pnpm install, pnpm build, pnpm dev all succeed
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
